"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[334],{7334:function(e,t,o){o.r(t);var r=o(2809),s=o(7294),n=o(787),i=o(6439),c=o(5021),a=o(5761),l=o(733),u=o(480),d=o(1788),p=o(5893);function f(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function b(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach((function(t){(0,r.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var m=function(e){var t=e.goodsInfo,o=e.colorStock,r=(e.selectHandle,(0,s.useState)(0)),f=r[0],m=r[1],g=(0,s.useState)({shop_title:"",user_type:"",url:"",name:"",prices:[{price:0,explains:"price_source",startTime:0,endTime:0},{price:0,explains:"price_discount",startTime:0,endTime:0},{price:0,explains:"price_sale_price",startTime:0,endTime:0},{price:0,explains:"price_orig_price",startTime:0,endTime:0}],volume:0,coupons:[{coupons_info:"",coupon_amount:0,coupon_start_fee:0,coupon_remain_count:0,startTime:0,endTime:0}],describe:"",id:"",buy_url:"",goods_url:"",rebate_rate:0}),h=g[0],v=g[1],j=(0,s.useState)(""),x=j[0],_=j[1],O=(0,s.useState)(""),w=O[0],y=O[1],T=(0,s.useState)(0),S=T[0],N=T[1],k=(0,s.useState)(0),C=k[0],P=k[1],D=(0,s.useState)(0),E=D[0],I=D[1],G=(0,s.useState)([]),q=G[0],B=G[1],H=(0,s.useState)(0),A=H[0],L=H[1],Z=(0,s.useState)(0),z=Z[0],J=Z[1];(0,s.useEffect)((function(){_((0,d.JI)(t)),v(t),N((0,d.Xm)(t)),P((0,d.s3)(t)),I((0,d.D2)(t)),B((0,d.pf)(t)),y((0,d._C)(t))}),[t]),(0,s.useEffect)((function(){var e=M("price_discount"),t=M("price_source");o.length>0&&e&&t&&(copyGoodsObj=b(b({},h),{},{price_source:t,price_discount:e}),v(copyGoodsObj))}),[o]);var M=function(e){if(o.length>0){for(var t=0,r=0,s=0;s<o.length;s++){var n=o[s][e];(n<t||0===t)&&(t=n),n>r&&(r=n)}return t===r?t:"".concat(t," - ").concat(r)}return null};return(0,p.jsxs)("div",{className:"p-2 bg-white mb-2 rounded-box",children:[(0,p.jsxs)("div",{className:"grid grid-cols-1",children:[(0,p.jsx)(i.uT,{goodsImgUrl:h.url,shopType:x,shopName:h.shop_title,imgClick:function(){return e=w,navigator&&navigator.clipboard&&navigator.clipboard.writeText&&navigator.clipboard.writeText(e).then((function(){console.log("Copied to clipboard")})).catch((function(e){console.log("Something went wrong",e)})),void(0,u.CB)(e,"taobao");var e}}),(0,p.jsx)(i.G,{goodsTitle:h.name,goodsDescribe:h.describe,priceDiscount:C,priceOrigin:E,volume:h.volume,rebateAmount:S,couponsInfos:q}),(0,p.jsxs)("div",{className:"flex justify-between w-full h-auto p-1",children:[(0,p.jsx)("div",{className:"flex justify-start items-center h-auto",children:x.length>0?(0,p.jsx)("div",{className:"badge badge-info badge-xs m-0",children:x}):null}),(0,p.jsxs)("div",{className:"btn-group",children:[(0,p.jsx)("button",{className:"btn btn-xs btn-ghost",onClick:function(){w===(0,d._C)(t)&&(L(A+1),console.log("showQrcode")),m(1)},children:"\u4e8c\u7ef4\u7801"}),(0,p.jsx)("button",{className:"btn btn-xs btn-active",onClick:function(){return J(z+1)},children:"\u6dd8\u53e3\u4ee4"})]})]})]}),(0,p.jsx)(n.A,{visible:f,setVisible:m,visibleNumber:1,acceptHandle:function(){return m(0)},children:(0,p.jsxs)("div",{className:"flex justify-center",children:[(0,p.jsx)("div",{className:"m-2 w-full h-auto",children:(0,p.jsx)("p",{children:h.name})}),(0,p.jsx)(i.RG,{urlText:w,size:200})]})}),(0,p.jsx)(a.L,{api:c.MB.taobaoPlatformCustomer,method:"POST",data:{method:"tbk_spread_get",map_data:{requests:[{url:w}]}},resolveBk:function(e){if(e.code&&1e3===e.code){console.log("\u5546\u54c1\u5361\u7247\u8bf7\u6c42\u6210\u529f",e);var t=e.results?e.results:null;if(t&&t.results&&t.results.length>0){var o=t.results[0];y(o.content)}}},requestCount:A,showLoading:!1}),(0,p.jsx)(l.Z,{url:w,requestTpwdCount:z})]})};m.defaultProps={goodsInfo:{},colorStock:[],selectHandle:function(e){console.log(e)}},t.default=m}}]);